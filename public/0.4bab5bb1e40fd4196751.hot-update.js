webpackHotUpdate(0,{229:function(module,exports,__webpack_require__){eval('"use strict";\n\nObject.defineProperty(exports, "__esModule", {\n\tvalue: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = __webpack_require__(8);\n\nvar _react2 = _interopRequireDefault(_react);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar App = function (_Component) {\n\t_inherits(App, _Component);\n\n\tfunction App() {\n\t\t_classCallCheck(this, App);\n\n\t\tvar _this = _possibleConstructorReturn(this, (App.__proto__ || Object.getPrototypeOf(App)).call(this));\n\n\t\t_this.state = {\n\t\t\theight: 199,\n\t\t\twidth: 265,\n\t\t\tstream: null,\n\t\t\tcaptureState: 0\n\t\t};\n\n\t\t// Camera methods\n\t\t_this.enableWebcam = _this.enableWebcam.bind(_this);\n\t\t_this.disableWebcam = _this.disableWebcam.bind(_this);\n\t\t_this.handleTakePicture = _this.handleTakePicture.bind(_this);\n\t\t_this.registerCameraEvents = _this.registerCameraEvents.bind(_this);\n\t\t_this.takePicture = _this.takePicture.bind(_this);\n\t\t_this.uploadImage = _this.uploadImage.bind(_this);\n\t\treturn _this;\n\t}\n\n\t_createClass(App, [{\n\t\tkey: "componentDidMount",\n\t\tvalue: function componentDidMount() {\n\t\t\tvar self = this;\n\t\t\tthis.registerCameraEvents();\n\t\t\tsetTimeout(function () {\n\t\t\t\tself.enableWebcam();\n\t\t\t}, 2000);\n\t\t}\n\n\t\t/**\n   * Enable Webcam\n   * @description: Enable the webcam\n   * @param: {none}\n   * @return: {none}\n   */\n\n\t}, {\n\t\tkey: "enableWebcam",\n\t\tvalue: function enableWebcam() {\n\t\t\tvar streaming = false;\n\t\t\tvar video = document.querySelector("#video");\n\t\t\tvar canvas = document.querySelector("#canvas");\n\n\t\t\t// Determine the vendor prefix\n\t\t\tnavigator.getMedia = navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia || navigator.msGetUserMedia;\n\n\t\t\tvar self = this;\n\t\t\t// Get the video stream from the webcam\n\t\t\tnavigator.getMedia({\n\t\t\t\tvideo: true,\n\t\t\t\taudio: false\n\t\t\t}, function (stream) {\n\t\t\t\t// Handle mozilla stream\n\t\t\t\tif (navigator.mozGetUserMedia) {\n\t\t\t\t\tvideo.mozSrcObject = stream;\n\t\t\t\t\tself.setState({ stream: stream });\n\t\t\t\t} else {\n\t\t\t\t\t// All other streams\n\t\t\t\t\tself.setState({ stream: stream });\n\t\t\t\t\tvar vendorURL = window.URL || window.webkitURL;\n\t\t\t\t\tvideo.src = vendorURL.createObjectURL(stream);\n\t\t\t\t}\n\t\t\t\tvideo.play();\n\t\t\t}, function (err) {\n\t\t\t\tconsole.log("Could not get the video stream from the webcam: " + err);\n\t\t\t});\n\n\t\t\t// Register video play event\n\t\t\tvideo.addEventListener(\'canplay\', function (ev) {\n\t\t\t\tif (!streaming) {\n\t\t\t\t\t//self.setState({height: video.videoHeight / (video.videoWidth / self.state.width)});\n\t\t\t\t\tvideo.setAttribute(\'width\', self.state.width);\n\t\t\t\t\tvideo.setAttribute(\'height\', self.state.height);\n\t\t\t\t\tcanvas.setAttribute(\'width\', self.state.width);\n\t\t\t\t\tcanvas.setAttribute(\'height\', self.state.height);\n\t\t\t\t\tstreaming = true;\n\t\t\t\t}\n\t\t\t}, false);\n\t\t}\n\t\t/**\n   * DisableWebcam\n   * @description: Disable the webcam\n   * @param: {none}\n   * @return: {none}\n   */\n\n\t}, {\n\t\tkey: "disableWebcam",\n\t\tvalue: function disableWebcam() {\n\t\t\tthis.state.stream.getTracks()[0].stop();\n\t\t}\n\n\t\t/**\n   * TakePicture\n   * @description: Take a still image from the webcam\n   * @param: {none}\n   * @return: {none}\n   */\n\n\t}, {\n\t\tkey: "takePicture",\n\t\tvalue: function takePicture() {\n\t\t\tvar photo = document.querySelector("#photo");\n\t\t\tvar video = document.querySelector("#video");\n\t\t\tvar capture = document.querySelector(\'#capture\');\n\t\t\tvar captureRemove = document.querySelector(\'#capture-remove\');\n\t\t\tvar captureUpload = document.querySelector(\'#capture-upload\');\n\t\t\tvar canvas = document.querySelector(\'#canvas\');\n\t\t\t// Display the photo div\n\t\t\tphoto.style.display = "inline-block";\n\t\t\t// Hide the video div\n\t\t\tvideo.style.display = "none";\n\t\t\tthis.setState({ captureState: 1 });\n\t\t\t// Hide the capture button\n\t\t\tcapture.style.display = "none";\n\t\t\t// Display the options for captured photos\n\t\t\tcaptureRemove.style.display = "inline-block";\n\t\t\tcaptureUpload.style.display = "inline-block";\n\t\t\t// Get still image from the video and write it to the canvas element\n\t\t\tcanvas.getContext(\'2d\').drawImage(video, 0, 0, this.state.width, this.state.height);\n\t\t\t// Play camera sound\n\t\t\tvar sound = document.getElementById("audio");\n\t\t\tsound.play();\n\t\t\t// Get image attached to the canvas\n\t\t\tvar data = canvas.toDataURL(\'image/png\');\n\t\t\t// Set the image to the photo div\n\t\t\tphoto.setAttribute(\'src\', data);\n\t\t\t// Hide the canvas\n\t\t\tcanvas.style.display = "none";\n\t\t}\n\n\t\t/**\n   * UploadImage\n   * @description: Upload the still image taken to the server\n   * @param: {none}\n   * @return: {promise} Upload image to server\n   */\n\n\t}, {\n\t\tkey: "uploadImage",\n\t\tvalue: function uploadImage() {\n\t\t\t// Get image from canvas element\n\t\t\tvar data = document.querySelector("#canvas").toDataURL(\'image/png\');\n\t\t\tdocument.querySelector("#photo").setAttribute(\'src\', data);\n\t\t\tdocument.querySelector("#canvas").style.display = "none";\n\n\t\t\t// Code below from stackoverflow\n\t\t\t// http://stackoverflow.com/a/12300351\n\t\t\tvar byteString = atob(data.split(\',\')[1]);\n\t\t\t// separate out the mime component\n\t\t\tvar mimeString = data.split(\',\')[0].split(\':\')[1].split(\';\')[0];\n\t\t\t// write the bytes of the string to an ArrayBuffer\n\t\t\tvar ab = new ArrayBuffer(byteString.length);\n\t\t\tvar ia = new Uint8Array(ab);\n\t\t\tfor (var i = 0; i < byteString.length; i++) {\n\t\t\t\tia[i] = byteString.charCodeAt(i);\n\t\t\t}\n\t\t\t// write the ArrayBuffer to a blob, and you\'re done\n\t\t\tvar blob = new Blob([ab], { type: mimeString });\n\n\t\t\t// Create Form Data instance and inject the image\n\t\t\tvar fd = new FormData();\n\t\t\tfd.append(\'file\', blob, Date.now() + \'.jpg\');\n\t\t\tconsole.log("UPLOAD");\n\t\t\tconsole.log(this.props);\n\t\t\treturn client.upload(fd, this.props.sidebar.chatFocused.uuid);\n\t\t}\n\n\t\t/**\n   * HandleTakePicture\n   * @description: Handle the visual state of taking a picture\n   * @param: {none}\n   * @return: {none}\n   */\n\n\t}, {\n\t\tkey: "handleTakePicture",\n\t\tvalue: function handleTakePicture(e) {\n\t\t\tvar chatCamera = document.querySelector(".chat-camera");\n\t\t\tvar chatTimeline = document.querySelector(".chat-timeline");\n\t\t\tvar captureRemove = document.querySelector("#capture-remove");\n\t\t\tvar captureUpload = document.querySelector("#capture-upload");\n\t\t\tvar photo = document.querySelector("#photo");\n\t\t\t// Hide the camera div\n\t\t\tif (hasClass(chatCamera, "active") && hasClass(chatTimeline, "camera-active")) {\n\t\t\t\tremoveClass(chatCamera, "active");\n\t\t\t\tremoveClass(chatTimeline, "camera-active");\n\t\t\t\t// Disable the webcam\n\t\t\t\tthis.disableWebcam();\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t// Show the camera div\n\t\t\taddClass(chatCamera, "active");\n\t\t\taddClass(chatTimeline, "camera-active");\n\t\t\t// Enable the webcam\n\t\t\tthis.enableWebcam();\n\t\t}\n\n\t\t/**\n   * RegisterCameraEvents\n   * @description: Register the camera button events\n   * @param: {none}\n   * @return: {none}\n   */\n\n\t}, {\n\t\tkey: "registerCameraEvents",\n\t\tvalue: function registerCameraEvents() {\n\t\t\tvar captureRemove = document.querySelector("#capture-remove");\n\t\t\tvar captureUpload = document.querySelector("#capture-upload");\n\t\t\tvar video = document.querySelector("#video");\n\t\t\tvar photo = document.querySelector("#photo");\n\t\t\tvar canvas = document.querySelector("#canvas");\n\t\t\tvar capture = document.querySelector(\'#capture\');\n\n\t\t\tvar self = this;\n\t\t\t// Handle click event for removing captured image\n\t\t\tcaptureRemove.addEventListener(\'click\', function (e) {\n\t\t\t\tself.setState({ captureState: 0 });\n\t\t\t\tcaptureRemove.style.display = "none";\n\t\t\t\tcaptureUpload.style.display = "none";\n\t\t\t\tphoto.style.display = "none";\n\t\t\t\tvideo.style.display = "inline-block";\n\t\t\t\tcanvas.style.display = "none";\n\t\t\t\tcapture.style.display = "inline-block";\n\t\t\t\te.preventDefault();\n\t\t\t}, false);\n\n\t\t\t// Handle click event for uploading captured image\n\t\t\tcaptureUpload.addEventListener(\'click\', function (e) {\n\t\t\t\tself.setState({ captureState: 0 });\n\t\t\t\tcaptureRemove.style.display = "none";\n\t\t\t\tcaptureUpload.style.display = "none";\n\t\t\t\tphoto.style.display = "none";\n\t\t\t\tvideo.style.display = "inline-block";\n\t\t\t\tcanvas.style.display = "none";\n\t\t\t\tcapture.style.display = "inline-block";\n\t\t\t\t// TODO:(mcervco) Figure out a visual way of saying the image upload failed\n\t\t\t\tself.uploadImage().then(function (res) {\n\t\t\t\t\tconsole.log(res.data);\n\t\t\t\t}).catch(function (err) {\n\t\t\t\t\tconsole.log(err.response);\n\t\t\t\t});\n\t\t\t\te.preventDefault();\n\t\t\t}, false);\n\n\t\t\t// Handle click event for taking a picture\n\t\t\tcapture.addEventListener(\'click\', function (e) {\n\t\t\t\tif (self.state.captureState == 0) {\n\t\t\t\t\tself.takePicture();\n\t\t\t\t} else {\n\t\t\t\t\tcaptureRemove.style.display = "none";\n\t\t\t\t\tcaptureUpload.style.display = "none";\n\t\t\t\t\tphoto.style.display = "none";\n\t\t\t\t\tvideo.style.display = "inline-block";\n\t\t\t\t\tcanvas.style.display = "none";\n\t\t\t\t\tself.setState({ captureState: 0 });\n\t\t\t\t}\n\t\t\t\te.preventDefault();\n\t\t\t}, false);\n\t\t}\n\t}, {\n\t\tkey: "render",\n\t\tvalue: function render() {\n\t\t\treturn _react2.default.createElement(\n\t\t\t\t"div",\n\t\t\t\tnull,\n\t\t\t\t_react2.default.createElement(\n\t\t\t\t\t"div",\n\t\t\t\t\t{ className: "chat-camera" },\n\t\t\t\t\t_react2.default.createElement(\n\t\t\t\t\t\t"div",\n\t\t\t\t\t\t{ className: "chat-camera-container" },\n\t\t\t\t\t\t_react2.default.createElement("i", { className: "fa fa-close", id: "capture-remove", style: { display: "none" } }),\n\t\t\t\t\t\t_react2.default.createElement("i", { className: "fa fa-save", id: "capture-upload", style: { display: "none" } }),\n\t\t\t\t\t\t_react2.default.createElement("video", { id: "video" }),\n\t\t\t\t\t\t_react2.default.createElement("canvas", { id: "canvas" }),\n\t\t\t\t\t\t_react2.default.createElement("img", { src: "", id: "photo", alt: "" }),\n\t\t\t\t\t\t_react2.default.createElement("audio", { id: "audio", src: "https://www.soundjay.com/mechanical/camera-shutter-click-08.wav" }),\n\t\t\t\t\t\t_react2.default.createElement("i", { id: "capture", className: "fa fa-circle-o" })\n\t\t\t\t\t)\n\t\t\t\t)\n\t\t\t);\n\t\t}\n\t}]);\n\n\treturn App;\n}(_react.Component);\n\nexports.default = App;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjI5LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vL3NyYy9jb21wb25lbnRzL0hvbWUuanM/MGE4OCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QsIHsgQ29tcG9uZW50IH0gZnJvbSAncmVhY3QnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBBcHAgZXh0ZW5kcyBDb21wb25lbnQge1xuXHRjb25zdHJ1Y3Rvcigpe1xuXHRcdHN1cGVyKCk7XG5cdFx0dGhpcy5zdGF0ZSA9IHtcblx0XHRcdGhlaWdodDogMTk5LFxuXHRcdFx0d2lkdGg6IDI2NSxcblx0XHRcdHN0cmVhbTogbnVsbCxcblx0XHRcdGNhcHR1cmVTdGF0ZTogMFxuXHRcdH07XG5cblx0XHQvLyBDYW1lcmEgbWV0aG9kc1xuXHRcdHRoaXMuZW5hYmxlV2ViY2FtID0gdGhpcy5lbmFibGVXZWJjYW0uYmluZCh0aGlzKTtcblx0XHR0aGlzLmRpc2FibGVXZWJjYW0gPSB0aGlzLmRpc2FibGVXZWJjYW0uYmluZCh0aGlzKTtcblx0XHR0aGlzLmhhbmRsZVRha2VQaWN0dXJlID0gdGhpcy5oYW5kbGVUYWtlUGljdHVyZS5iaW5kKHRoaXMpO1xuXHRcdHRoaXMucmVnaXN0ZXJDYW1lcmFFdmVudHMgPSB0aGlzLnJlZ2lzdGVyQ2FtZXJhRXZlbnRzLmJpbmQodGhpcyk7XG5cdFx0dGhpcy50YWtlUGljdHVyZSA9IHRoaXMudGFrZVBpY3R1cmUuYmluZCh0aGlzKTtcblx0XHR0aGlzLnVwbG9hZEltYWdlID0gdGhpcy51cGxvYWRJbWFnZS5iaW5kKHRoaXMpO1xuXHR9XG5cdGNvbXBvbmVudERpZE1vdW50KCl7XG5cdFx0dmFyIHNlbGYgPSB0aGlzO1xuXHRcdHRoaXMucmVnaXN0ZXJDYW1lcmFFdmVudHMoKTtcblx0XHRzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG5cdFx0XHRzZWxmLmVuYWJsZVdlYmNhbSgpO1x0XG5cdFx0fSwgMjAwMCk7XG5cdH1cblxuXHQvKipcblx0ICogRW5hYmxlIFdlYmNhbVxuXHQgKiBAZGVzY3JpcHRpb246IEVuYWJsZSB0aGUgd2ViY2FtXG5cdCAqIEBwYXJhbToge25vbmV9XG5cdCAqIEByZXR1cm46IHtub25lfVxuXHQgKi9cblx0ZW5hYmxlV2ViY2FtKCl7XG5cdFx0bGV0IHN0cmVhbWluZyA9IGZhbHNlO1xuXHRcdGxldCB2aWRlbyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjdmlkZW9cIik7XG5cdFx0bGV0IGNhbnZhcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjY2FudmFzXCIpO1xuXG5cdFx0Ly8gRGV0ZXJtaW5lIHRoZSB2ZW5kb3IgcHJlZml4XG5cdFx0bmF2aWdhdG9yLmdldE1lZGlhID0gKFxuXHRcdFx0bmF2aWdhdG9yLmdldFVzZXJNZWRpYSB8fFxuXHRcdFx0bmF2aWdhdG9yLndlYmtpdEdldFVzZXJNZWRpYSB8fFxuXHRcdFx0bmF2aWdhdG9yLm1vekdldFVzZXJNZWRpYSB8fFxuXHRcdFx0bmF2aWdhdG9yLm1zR2V0VXNlck1lZGlhXG5cdFx0KTtcblxuXHRcdHZhciBzZWxmID0gdGhpcztcblx0XHQvLyBHZXQgdGhlIHZpZGVvIHN0cmVhbSBmcm9tIHRoZSB3ZWJjYW1cblx0XHRuYXZpZ2F0b3IuZ2V0TWVkaWEoe1xuXHRcdFx0dmlkZW86IHRydWUsXG5cdFx0XHRhdWRpbzogZmFsc2Vcblx0XHR9LCBmdW5jdGlvbihzdHJlYW0pIHtcblx0XHRcdC8vIEhhbmRsZSBtb3ppbGxhIHN0cmVhbVxuXHRcdFx0aWYobmF2aWdhdG9yLm1vekdldFVzZXJNZWRpYSkge1xuXHRcdFx0XHR2aWRlby5tb3pTcmNPYmplY3QgPSBzdHJlYW07XG5cdFx0XHRcdHNlbGYuc2V0U3RhdGUoe3N0cmVhbTogc3RyZWFtfSk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQvLyBBbGwgb3RoZXIgc3RyZWFtc1xuXHRcdFx0XHRzZWxmLnNldFN0YXRlKHtzdHJlYW06IHN0cmVhbX0pO1xuXHRcdFx0XHR2YXIgdmVuZG9yVVJMID0gd2luZG93LlVSTCB8fCB3aW5kb3cud2Via2l0VVJMO1xuXHRcdFx0XHR2aWRlby5zcmMgPSB2ZW5kb3JVUkwuY3JlYXRlT2JqZWN0VVJMKHN0cmVhbSk7XG5cdFx0XHR9XG5cdFx0XHR2aWRlby5wbGF5KCk7XG5cdFx0fSwgZnVuY3Rpb24oZXJyKSB7XG5cdFx0XHRjb25zb2xlLmxvZyhcIkNvdWxkIG5vdCBnZXQgdGhlIHZpZGVvIHN0cmVhbSBmcm9tIHRoZSB3ZWJjYW06IFwiICsgZXJyKTtcblx0XHR9KTtcblxuXHRcdC8vIFJlZ2lzdGVyIHZpZGVvIHBsYXkgZXZlbnRcblx0XHR2aWRlby5hZGRFdmVudExpc3RlbmVyKCdjYW5wbGF5JywgZnVuY3Rpb24oZXYpe1xuXHRcdFx0aWYoIXN0cmVhbWluZyl7XG5cdFx0XHRcdC8vc2VsZi5zZXRTdGF0ZSh7aGVpZ2h0OiB2aWRlby52aWRlb0hlaWdodCAvICh2aWRlby52aWRlb1dpZHRoIC8gc2VsZi5zdGF0ZS53aWR0aCl9KTtcblx0XHRcdFx0dmlkZW8uc2V0QXR0cmlidXRlKCd3aWR0aCcsIHNlbGYuc3RhdGUud2lkdGgpO1xuXHRcdFx0XHR2aWRlby5zZXRBdHRyaWJ1dGUoJ2hlaWdodCcsIHNlbGYuc3RhdGUuaGVpZ2h0KTtcblx0XHRcdFx0Y2FudmFzLnNldEF0dHJpYnV0ZSgnd2lkdGgnLCBzZWxmLnN0YXRlLndpZHRoKTtcblx0XHRcdFx0Y2FudmFzLnNldEF0dHJpYnV0ZSgnaGVpZ2h0Jywgc2VsZi5zdGF0ZS5oZWlnaHQpO1xuXHRcdFx0XHRzdHJlYW1pbmcgPSB0cnVlO1xuXHRcdFx0fVxuXHRcdH0sIGZhbHNlKTtcblxuXHR9XG5cdC8qKlxuXHQgKiBEaXNhYmxlV2ViY2FtXG5cdCAqIEBkZXNjcmlwdGlvbjogRGlzYWJsZSB0aGUgd2ViY2FtXG5cdCAqIEBwYXJhbToge25vbmV9XG5cdCAqIEByZXR1cm46IHtub25lfVxuXHQgKi9cblx0ZGlzYWJsZVdlYmNhbSgpe1xuXHRcdHRoaXMuc3RhdGUuc3RyZWFtLmdldFRyYWNrcygpWzBdLnN0b3AoKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBUYWtlUGljdHVyZVxuXHQgKiBAZGVzY3JpcHRpb246IFRha2UgYSBzdGlsbCBpbWFnZSBmcm9tIHRoZSB3ZWJjYW1cblx0ICogQHBhcmFtOiB7bm9uZX1cblx0ICogQHJldHVybjoge25vbmV9XG5cdCAqL1xuXHR0YWtlUGljdHVyZSgpIHtcblx0XHR2YXIgcGhvdG8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Bob3RvXCIpO1xuXHRcdHZhciB2aWRlbyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjdmlkZW9cIik7XG5cdFx0dmFyIGNhcHR1cmUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjY2FwdHVyZScpXG5cdFx0dmFyIGNhcHR1cmVSZW1vdmUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjY2FwdHVyZS1yZW1vdmUnKTtcblx0XHR2YXIgY2FwdHVyZVVwbG9hZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNjYXB0dXJlLXVwbG9hZCcpO1xuXHRcdHZhciBjYW52YXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjY2FudmFzJyk7XG5cdFx0Ly8gRGlzcGxheSB0aGUgcGhvdG8gZGl2XG5cdFx0cGhvdG8uc3R5bGUuZGlzcGxheSA9IFwiaW5saW5lLWJsb2NrXCI7XG5cdFx0Ly8gSGlkZSB0aGUgdmlkZW8gZGl2XG5cdFx0dmlkZW8uc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuXHRcdHRoaXMuc2V0U3RhdGUoe2NhcHR1cmVTdGF0ZTogMX0pO1xuXHRcdC8vIEhpZGUgdGhlIGNhcHR1cmUgYnV0dG9uXG5cdFx0Y2FwdHVyZS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG5cdFx0Ly8gRGlzcGxheSB0aGUgb3B0aW9ucyBmb3IgY2FwdHVyZWQgcGhvdG9zXG5cdFx0Y2FwdHVyZVJlbW92ZS5zdHlsZS5kaXNwbGF5ID0gXCJpbmxpbmUtYmxvY2tcIjtcblx0XHRjYXB0dXJlVXBsb2FkLnN0eWxlLmRpc3BsYXkgPSBcImlubGluZS1ibG9ja1wiO1xuXHRcdC8vIEdldCBzdGlsbCBpbWFnZSBmcm9tIHRoZSB2aWRlbyBhbmQgd3JpdGUgaXQgdG8gdGhlIGNhbnZhcyBlbGVtZW50XG5cdFx0Y2FudmFzLmdldENvbnRleHQoJzJkJykuZHJhd0ltYWdlKHZpZGVvLCAwLCAwLCB0aGlzLnN0YXRlLndpZHRoLCB0aGlzLnN0YXRlLmhlaWdodCk7XG5cdFx0Ly8gUGxheSBjYW1lcmEgc291bmRcblx0XHR2YXIgc291bmQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImF1ZGlvXCIpO1xuXHRcdHNvdW5kLnBsYXkoKVxuXHRcdC8vIEdldCBpbWFnZSBhdHRhY2hlZCB0byB0aGUgY2FudmFzXG5cdFx0dmFyIGRhdGEgPSBjYW52YXMudG9EYXRhVVJMKCdpbWFnZS9wbmcnKTtcblx0XHQvLyBTZXQgdGhlIGltYWdlIHRvIHRoZSBwaG90byBkaXZcblx0XHRwaG90by5zZXRBdHRyaWJ1dGUoJ3NyYycsIGRhdGEpO1xuXHRcdC8vIEhpZGUgdGhlIGNhbnZhc1xuXHRcdGNhbnZhcy5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG5cdH1cblxuXHQvKipcblx0ICogVXBsb2FkSW1hZ2Vcblx0ICogQGRlc2NyaXB0aW9uOiBVcGxvYWQgdGhlIHN0aWxsIGltYWdlIHRha2VuIHRvIHRoZSBzZXJ2ZXJcblx0ICogQHBhcmFtOiB7bm9uZX1cblx0ICogQHJldHVybjoge3Byb21pc2V9IFVwbG9hZCBpbWFnZSB0byBzZXJ2ZXJcblx0ICovXG5cdHVwbG9hZEltYWdlKCl7XG5cdFx0Ly8gR2V0IGltYWdlIGZyb20gY2FudmFzIGVsZW1lbnRcblx0XHR2YXIgZGF0YSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjY2FudmFzXCIpLnRvRGF0YVVSTCgnaW1hZ2UvcG5nJyk7XG5cdFx0ZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwaG90b1wiKS5zZXRBdHRyaWJ1dGUoJ3NyYycsIGRhdGEpO1xuXHRcdGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjY2FudmFzXCIpLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcblxuXHRcdC8vIENvZGUgYmVsb3cgZnJvbSBzdGFja292ZXJmbG93XG5cdFx0Ly8gaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL2EvMTIzMDAzNTFcblx0XHR2YXIgYnl0ZVN0cmluZyA9IGF0b2IoZGF0YS5zcGxpdCgnLCcpWzFdKTtcblx0XHQvLyBzZXBhcmF0ZSBvdXQgdGhlIG1pbWUgY29tcG9uZW50XG5cdFx0dmFyIG1pbWVTdHJpbmcgPSBkYXRhLnNwbGl0KCcsJylbMF0uc3BsaXQoJzonKVsxXS5zcGxpdCgnOycpWzBdXG5cdFx0Ly8gd3JpdGUgdGhlIGJ5dGVzIG9mIHRoZSBzdHJpbmcgdG8gYW4gQXJyYXlCdWZmZXJcblx0XHR2YXIgYWIgPSBuZXcgQXJyYXlCdWZmZXIoYnl0ZVN0cmluZy5sZW5ndGgpO1xuXHRcdHZhciBpYSA9IG5ldyBVaW50OEFycmF5KGFiKTtcblx0XHRmb3IodmFyIGkgPSAwOyBpIDwgYnl0ZVN0cmluZy5sZW5ndGg7IGkrKyl7XG5cdFx0XHRpYVtpXSA9IGJ5dGVTdHJpbmcuY2hhckNvZGVBdChpKTtcblx0XHR9XG5cdFx0Ly8gd3JpdGUgdGhlIEFycmF5QnVmZmVyIHRvIGEgYmxvYiwgYW5kIHlvdSdyZSBkb25lXG5cdFx0dmFyIGJsb2IgPSBuZXcgQmxvYihbYWJdLCB7IHR5cGU6IG1pbWVTdHJpbmcgfSk7XG5cblx0XHQvLyBDcmVhdGUgRm9ybSBEYXRhIGluc3RhbmNlIGFuZCBpbmplY3QgdGhlIGltYWdlXG5cdFx0dmFyIGZkID0gbmV3IEZvcm1EYXRhKCk7XG5cdFx0ZmQuYXBwZW5kKCdmaWxlJywgYmxvYiwgRGF0ZS5ub3coKSArICcuanBnJyk7XG5cdFx0Y29uc29sZS5sb2coXCJVUExPQURcIik7XG5cdFx0Y29uc29sZS5sb2codGhpcy5wcm9wcyk7XG5cdFx0cmV0dXJuIGNsaWVudC51cGxvYWQoZmQsIHRoaXMucHJvcHMuc2lkZWJhci5jaGF0Rm9jdXNlZC51dWlkKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBIYW5kbGVUYWtlUGljdHVyZVxuXHQgKiBAZGVzY3JpcHRpb246IEhhbmRsZSB0aGUgdmlzdWFsIHN0YXRlIG9mIHRha2luZyBhIHBpY3R1cmVcblx0ICogQHBhcmFtOiB7bm9uZX1cblx0ICogQHJldHVybjoge25vbmV9XG5cdCAqL1xuXHRoYW5kbGVUYWtlUGljdHVyZShlKXtcblx0XHR2YXIgY2hhdENhbWVyYSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2hhdC1jYW1lcmFcIik7XG5cdFx0dmFyIGNoYXRUaW1lbGluZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2hhdC10aW1lbGluZVwiKTtcblx0XHR2YXIgY2FwdHVyZVJlbW92ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjY2FwdHVyZS1yZW1vdmVcIik7XG5cdFx0dmFyIGNhcHR1cmVVcGxvYWQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2NhcHR1cmUtdXBsb2FkXCIpO1xuXHRcdHZhciBwaG90byA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcGhvdG9cIik7XG5cdFx0Ly8gSGlkZSB0aGUgY2FtZXJhIGRpdlxuXHRcdGlmKGhhc0NsYXNzKGNoYXRDYW1lcmEsIFwiYWN0aXZlXCIpICYmIGhhc0NsYXNzKGNoYXRUaW1lbGluZSwgXCJjYW1lcmEtYWN0aXZlXCIpKXtcblx0XHRcdHJlbW92ZUNsYXNzKGNoYXRDYW1lcmEsIFwiYWN0aXZlXCIpO1xuXHRcdFx0cmVtb3ZlQ2xhc3MoY2hhdFRpbWVsaW5lLCBcImNhbWVyYS1hY3RpdmVcIik7XG5cdFx0XHQvLyBEaXNhYmxlIHRoZSB3ZWJjYW1cblx0XHRcdHRoaXMuZGlzYWJsZVdlYmNhbSgpO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblx0XHQvLyBTaG93IHRoZSBjYW1lcmEgZGl2XG5cdFx0YWRkQ2xhc3MoY2hhdENhbWVyYSwgXCJhY3RpdmVcIik7XG5cdFx0YWRkQ2xhc3MoY2hhdFRpbWVsaW5lLCBcImNhbWVyYS1hY3RpdmVcIik7XG5cdFx0Ly8gRW5hYmxlIHRoZSB3ZWJjYW1cblx0XHR0aGlzLmVuYWJsZVdlYmNhbSgpO1xuXHR9XG5cblx0LyoqXG5cdCAqIFJlZ2lzdGVyQ2FtZXJhRXZlbnRzXG5cdCAqIEBkZXNjcmlwdGlvbjogUmVnaXN0ZXIgdGhlIGNhbWVyYSBidXR0b24gZXZlbnRzXG5cdCAqIEBwYXJhbToge25vbmV9XG5cdCAqIEByZXR1cm46IHtub25lfVxuXHQgKi9cblx0cmVnaXN0ZXJDYW1lcmFFdmVudHMoKXtcblx0XHR2YXIgY2FwdHVyZVJlbW92ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjY2FwdHVyZS1yZW1vdmVcIik7XG5cdFx0dmFyIGNhcHR1cmVVcGxvYWQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2NhcHR1cmUtdXBsb2FkXCIpO1xuXHRcdHZhciB2aWRlbyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjdmlkZW9cIik7XG5cdFx0dmFyIHBob3RvID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwaG90b1wiKTtcblx0XHR2YXIgY2FudmFzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNjYW52YXNcIik7XG5cdFx0dmFyIGNhcHR1cmUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjY2FwdHVyZScpO1xuXG5cdFx0dmFyIHNlbGYgPSB0aGlzO1xuXHRcdC8vIEhhbmRsZSBjbGljayBldmVudCBmb3IgcmVtb3ZpbmcgY2FwdHVyZWQgaW1hZ2Vcblx0XHRjYXB0dXJlUmVtb3ZlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZSl7XG5cdFx0XHRzZWxmLnNldFN0YXRlKHtjYXB0dXJlU3RhdGU6IDB9KTtcblx0XHRcdGNhcHR1cmVSZW1vdmUuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuXHRcdFx0Y2FwdHVyZVVwbG9hZC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG5cdFx0XHRwaG90by5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG5cdFx0XHR2aWRlby5zdHlsZS5kaXNwbGF5ID0gXCJpbmxpbmUtYmxvY2tcIjtcblx0XHRcdGNhbnZhcy5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG5cdFx0XHRjYXB0dXJlLnN0eWxlLmRpc3BsYXkgPSBcImlubGluZS1ibG9ja1wiO1xuXHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdH0sIGZhbHNlKTtcblxuXHRcdC8vIEhhbmRsZSBjbGljayBldmVudCBmb3IgdXBsb2FkaW5nIGNhcHR1cmVkIGltYWdlXG5cdFx0Y2FwdHVyZVVwbG9hZC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGUpe1xuXHRcdFx0c2VsZi5zZXRTdGF0ZSh7Y2FwdHVyZVN0YXRlOiAwfSk7XG5cdFx0XHRjYXB0dXJlUmVtb3ZlLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcblx0XHRcdGNhcHR1cmVVcGxvYWQuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuXHRcdFx0cGhvdG8uc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuXHRcdFx0dmlkZW8uc3R5bGUuZGlzcGxheSA9IFwiaW5saW5lLWJsb2NrXCI7XG5cdFx0XHRjYW52YXMuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuXHRcdFx0Y2FwdHVyZS5zdHlsZS5kaXNwbGF5ID0gXCJpbmxpbmUtYmxvY2tcIjtcblx0XHRcdC8vIFRPRE86KG1jZXJ2Y28pIEZpZ3VyZSBvdXQgYSB2aXN1YWwgd2F5IG9mIHNheWluZyB0aGUgaW1hZ2UgdXBsb2FkIGZhaWxlZFxuXHRcdFx0c2VsZi51cGxvYWRJbWFnZSgpLnRoZW4oZnVuY3Rpb24ocmVzKXtcblx0XHRcdFx0Y29uc29sZS5sb2cocmVzLmRhdGEpO1xuXHRcdFx0fSkuY2F0Y2goZnVuY3Rpb24oZXJyKXtcblx0XHRcdFx0Y29uc29sZS5sb2coZXJyLnJlc3BvbnNlKTtcblx0XHRcdH0pO1xuXHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdH0sIGZhbHNlKTtcblxuXHRcdC8vIEhhbmRsZSBjbGljayBldmVudCBmb3IgdGFraW5nIGEgcGljdHVyZVxuXHRcdGNhcHR1cmUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihlKXtcblx0XHRcdGlmKHNlbGYuc3RhdGUuY2FwdHVyZVN0YXRlID09IDApe1xuXHRcdFx0XHRzZWxmLnRha2VQaWN0dXJlKCk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRjYXB0dXJlUmVtb3ZlLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcblx0XHRcdFx0Y2FwdHVyZVVwbG9hZC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG5cdFx0XHRcdHBob3RvLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcblx0XHRcdFx0dmlkZW8uc3R5bGUuZGlzcGxheSA9IFwiaW5saW5lLWJsb2NrXCI7XG5cdFx0XHRcdGNhbnZhcy5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG5cdFx0XHRcdHNlbGYuc2V0U3RhdGUoe2NhcHR1cmVTdGF0ZTogMH0pO1xuXHRcdFx0fVxuXHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdH0sIGZhbHNlKTtcblx0fVxuXG5cdHJlbmRlcigpe1xuXHRcdHJldHVybiAoXG5cdFx0XHQ8ZGl2PlxuXHRcdFx0XHQ8ZGl2IGNsYXNzTmFtZT1cImNoYXQtY2FtZXJhXCI+XG5cdFx0XHRcdFx0PGRpdiBjbGFzc05hbWU9XCJjaGF0LWNhbWVyYS1jb250YWluZXJcIj5cblx0XHRcdFx0XHRcdDxpIGNsYXNzTmFtZT1cImZhIGZhLWNsb3NlXCIgaWQ9XCJjYXB0dXJlLXJlbW92ZVwiIHN0eWxlPXt7ZGlzcGxheTogXCJub25lXCJ9fT48L2k+XG5cdFx0XHRcdFx0XHQ8aSBjbGFzc05hbWU9XCJmYSBmYS1zYXZlXCIgaWQ9XCJjYXB0dXJlLXVwbG9hZFwiIHN0eWxlPXt7ZGlzcGxheTogXCJub25lXCJ9fT48L2k+XG5cdFx0XHRcdFx0XHQ8dmlkZW8gaWQ9XCJ2aWRlb1wiPjwvdmlkZW8+XG5cdFx0XHRcdFx0XHQ8Y2FudmFzIGlkPVwiY2FudmFzXCIgPjwvY2FudmFzPlxuXHRcdFx0XHRcdFx0PGltZyBzcmM9XCJcIiBpZD1cInBob3RvXCIgYWx0PVwiXCIvPlxuXHRcdFx0XHRcdFx0PGF1ZGlvIGlkPVwiYXVkaW9cIiBzcmM9XCJodHRwczovL3d3dy5zb3VuZGpheS5jb20vbWVjaGFuaWNhbC9jYW1lcmEtc2h1dHRlci1jbGljay0wOC53YXZcIj48L2F1ZGlvPlxuXHRcdFx0XHRcdFx0PGkgaWQ9XCJjYXB0dXJlXCIgY2xhc3NOYW1lPVwiZmEgZmEtY2lyY2xlLW9cIj48L2k+XG5cdFx0XHRcdFx0PC9kaXY+XG5cdFx0XHRcdDwvZGl2PlxuXHRcdFx0PC9kaXY+XG5cdFx0KTtcblx0fVxufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHNyYy9jb21wb25lbnRzL0hvbWUuanMiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQUE7QUFDQTs7Ozs7Ozs7Ozs7QUFDQTs7O0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQUNBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFmQTtBQWdCQTtBQUNBOzs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7OztBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTs7Ozs7Ozs7O0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7O0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7OztBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7OztBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFQQTtBQURBO0FBREE7QUFjQTs7Ozs7O0FBdlFBIiwic291cmNlUm9vdCI6IiJ9')}});